#!/bin/bash
PS3='Please enter your choice: '
options=("Option 1" "Option 2" "Option 3" "Quit")
select opt in "${options[@]}"
do
    case $opt in
        "Option 1")
            echo "Scanning for connected Klipper device"
            output_file="klipper_devices.cfg"
            devices="/dev/serial/by-id/*"
            echo "# Klipper Mainsail Device Configuration" > "$output_file"
            echo "# Auto-generated by script on $(date)" >> "$output_file"
            echo "" >> "$output_file"
            
            for device in $devices; do
                echo "[mcu]" >> "$output_file"
                echo "serial: $device" >> "$output_file"
                echo  "restart_method: command" >> "$output_file"
                echo "" >> "$output_file"
            done
            
            echo "Device configuration has been written to $output_file."
            ;;
        "Option 2")
            echo "you chose choice 2"
            ;;
        "Option 3")
            echo "you chose choice $REPLY which is $opt"
            ;;
        "Quit")
            break
            ;;
        *) echo "invalid option $REPLY";;
    esac
done


